name: Build
on: workflow_dispatch

jobs:
  test:
    name: Run build
    runs-on: macOS-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - name: Toolchain
        run: |
          xcodebuild -version
          swift build --version
        shell: bash
      - id: build
        name: Build universal binary
        run: | 
          swift build -c release --disable-sandbox --arch arm64 --arch x86_64
          lipo -info "$(swift build -c release --disable-sandbox --arch arm64 --arch x86_64 --show-bin-path)/xcaudit"
        shell: bash
